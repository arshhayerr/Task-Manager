
// Event listener for filter buttons
filterButtonsContainer.addEventListener('click', (e) => {
    if (e.target.tagName === 'BUTTON') {
        const filterValue = e.target.dataset.filter;
        if (filterValue) {
            currentFilter = filterValue;
            // Update active button style
            filterButtonsContainer.querySelectorAll('button').forEach(btn => {
                btn.classList.remove('active');
            });
            e.target.classList.add('active');
            renderTasks(); // Re-render tasks based on filter
        }
    }
});


// --- Pomodoro Timer --- (Added sound on completion)
function updateTimerDisplay() {
    const minutes = Math.floor(totalSeconds / 60);
    const seconds = totalSeconds % 60;
    timerDisplay.textContent = ${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')};
}

function startTimer() {
    if (isRunning) return;
    isRunning = true;
    startPauseButton.innerHTML = '<i class="fas fa-pause mr-1"></i>Pause';
    startPauseButton.classList.replace('bg-yellow-500', 'bg-orange-500');
    startPauseButton.classList.replace('hover:bg-yellow-600', 'hover:bg-orange-600');
    timerStatus.textContent = Status: Running (${isWorkSession ? 'Work' : 'Break'});
    timerInterval = setInterval(() => {
        if (totalSeconds <= 0) {
            clearInterval(timerInterval);
            isRunning = false;
            if (timerEndSound) timerEndSound(); // Play sound if initialized
            alert(Time's up! Starting ${!isWorkSession ? 'Work' : 'Break'} session.);
            isWorkSession = !isWorkSession;
            resetTimer();
            return;
        }
        totalSeconds--;
        updateTimerDisplay();
    }, 1000);
}

function pauseTimer() {
    if (!isRunning) return;
    isRunning = false;
    clearInterval(timerInterval);
    startPauseButton.innerHTML = '<i class="fas fa-play mr-1"></i>Resume';
    startPauseButton.classList.replace('bg-orange-500', 'bg-yellow-500');
    startPauseButton.classList.replace('hover:bg-orange-600', 'hover:bg-yellow-600');
    timerStatus.textContent = Status: Paused (${isWorkSession ? 'Work' : 'Break'});
}

